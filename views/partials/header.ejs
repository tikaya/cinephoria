<nav class="navbar navbar-expand-lg cinema-navbar shadow-custom fixed-top">
  <div class="container-fluid">

    <!-- LOGO -->
    <a class="navbar-brand cinema-logo fw-bold px-3 d-flex align-items-center" 
       href="/" 
       style="font-family:'Cinzel',serif; color:#f5c518; font-size:1.8rem;">
      <i class="fas fa-film me-2" style="font-size:1.4rem;"></i> Cinéphoria
    </a>

    <!-- Toggler Mobile -->
    <button class="navbar-toggler border-0" type="button" onclick="toggleMenu()" aria-label="Menu">
      <i class="fas fa-bars" id="menuIcon" style="color: #f5c518; font-size: 1.5rem;"></i>
    </button>

    <!-- MENU -->
    <div class="navbar-collapse" id="navbarContent">
      
      <!-- Bouton fermer (visible sur mobile) -->
      <button class="btn-close-menu" onclick="closeMenu()">
        <i class="fas fa-times"></i>
      </button>

      <ul class="navbar-nav ms-auto gap-1">

        <li class="nav-item">
          <a class="nav-link nav-anim text-light px-3 py-2" href="/films" onclick="closeMenu()">
            <i class="fas fa-film me-1"></i> Films
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link nav-anim text-light px-3 py-2" href="/reservation" onclick="closeMenu()">
            <i class="fas fa-ticket-alt me-1"></i> Réservation
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link nav-anim text-light px-3 py-2" href="/contact" onclick="closeMenu()">
            <i class="fas fa-envelope me-1"></i> Contact
          </a>
        </li>

        <!-- ADMIN -->
        <% if (currentUser && currentUser.role === 'ADMIN') { %>
          <li class="nav-item">
            <a class="nav-link nav-anim text-warning px-3 py-2" href="/admin" onclick="closeMenu()">
              <i class="fa-solid fa-shield-halved me-1"></i> Admin
            </a>
          </li>
        <% } %>

        <!-- EMPLOYÉ -->
        <% if (currentUser && currentUser.role === 'EMPLOYEE') { %>
          <li class="nav-item">
            <a class="nav-link nav-anim text-warning px-3 py-2" href="/employe/home" onclick="closeMenu()">
              <i class="fa-solid fa-user-tie me-1"></i> Espace Employé
            </a>
          </li>
        <% } %>

        <!-- UTILISATEUR -->
        <% if (currentUser && currentUser.role === 'USER') { %>
          <li class="nav-item">
            <a class="nav-link nav-anim text-warning px-3 py-2" href="/user/espace" onclick="closeMenu()">
              <i class="fa-solid fa-user-circle me-1"></i> Mon espace
            </a>
          </li>
        <% } %>

        <!-- NON CONNECTÉ -->
        <% if (!currentUser) { %>
          <li class="nav-item">
            <a class="nav-link nav-anim text-light px-3 py-2" href="/login" onclick="closeMenu()">
              <i class="fas fa-sign-in-alt me-1"></i> Se connecter
            </a>
          </li>
        <% } %>

        <!-- CONNECTÉ — LOGOUT -->
        <% if (currentUser) { %>
          <li class="nav-item">
            <a class="nav-link nav-anim text-danger px-3 py-2" href="/logout" onclick="closeMenu()">
              <i class="fas fa-power-off me-1"></i> Déconnexion
            </a>
          </li>
        <% } %>

      </ul>
    </div>

    <!-- Overlay sombre -->
    <div class="menu-overlay" id="menuOverlay" onclick="closeMenu()"></div>

  </div>
</nav>

<style>
.cinema-navbar {
  background: rgba(12, 18, 38, 0.95);
  backdrop-filter: blur(13px);
  border-bottom: 1.2px solid rgba(245,197,24,0.22);
  z-index: 1001;
}
main, .main-content {
  padding-top: 70px;
}
/* Bouton fermer */
.btn-close-menu {
  display: none;
}

/* DESKTOP */
@media (min-width: 992px) {
  .navbar-collapse {
    display: flex !important;
  }
  .menu-overlay {
    display: none !important;
  }
}

/* MOBILE */
@media (max-width: 991px) {
  .navbar-collapse {
    position: fixed;
    top: 0;
    right: -300px;
    width: 280px;
    height: 100vh;
    background: rgba(12, 18, 38, 0.98);
    backdrop-filter: blur(20px);
    padding: 20px;
    padding-top: 70px;
    transition: right 0.3s ease;
    z-index: 1003;
    display: block !important;
  }
  
  .navbar-collapse.show {
    right: 0;
  }
  
  /* Bouton X visible en mobile */
  .btn-close-menu {
    display: block;
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: #f5c518;
    font-size: 1.8rem;
    cursor: pointer;
    padding: 5px 10px;
    z-index: 1004;
  }
  
  .btn-close-menu:hover {
    color: #fff;
  }
  
  .navbar-nav {
    flex-direction: column;
  }
  
  .navbar-nav .nav-link {
    padding: 1rem 1.2rem !important;
    border-bottom: 1px solid rgba(245,197,24,0.15);
    font-size: 1.1rem;
  }
  
  .navbar-nav .nav-item:last-child .nav-link {
    border-bottom: none;
  }
  
  /* Overlay */
  .menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
    z-index: 1002;
  }
  
  .menu-overlay.show {
    opacity: 1;
    visibility: visible;
  }
}

.nav-anim:hover, .nav-anim:focus {
  color: #f5c518 !important;
  background: rgba(245,197,24,0.1);
  border-radius: 8px;
}

.navbar-toggler:focus { 
  outline: none; 
  box-shadow: none; 
}
</style>

<script>
function toggleMenu() {
  const menu = document.getElementById('navbarContent');
  const overlay = document.getElementById('menuOverlay');
  
  menu.classList.toggle('show');
  overlay.classList.toggle('show');
}

function closeMenu() {
  const menu = document.getElementById('navbarContent');
  const overlay = document.getElementById('menuOverlay');
  
  menu.classList.remove('show');
  overlay.classList.remove('show');
}
</script>