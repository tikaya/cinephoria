<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accueil - Cinéphoria</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Cinzel:wght@600;700&display=swap" rel="stylesheet">
  
  <!-- CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/images/favicon.png">

  <style>
    :root {
      --gold: #f5c518;
      --gold-glow: rgba(245, 197, 24, 0.4);
      --purple: #a700ff;
      --pink: #ff004d;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    html, body { height: 100%; scroll-behavior: smooth; }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      background: radial-gradient(ellipse at top, #1a2341, #0a0f1f 50%, #000000);
      background-size: 100% 200%;
      animation: gradientFlow 20s ease infinite, fadeIn 0.8s ease forwards;
      color: #f2f2f2;
      font-family: 'Poppins', sans-serif;
      position: relative;
      overflow-x: hidden;
    }

    /* Animation apparition */
    @keyframes fadeIn {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    /* Particules */
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-image: 
        radial-gradient(2px 2px at 20% 30%, rgba(245,197,24,0.15), transparent),
        radial-gradient(2px 2px at 60% 70%, rgba(167,0,255,0.1), transparent),
        radial-gradient(1px 1px at 50% 50%, rgba(255,0,77,0.1), transparent),
        radial-gradient(1px 1px at 80% 10%, rgba(245,197,24,0.1), transparent);
      background-size: 200% 200%;
      animation: particlesFloat 30s ease infinite;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes particlesFloat {
      0%, 100% { background-position: 0% 0%; }
      50% { background-position: 100% 100%; }
    }

    @keyframes gradientFlow {
      0% { background-position: 50% 0%; }
      50% { background-position: 50% 100%; }
      100% { background-position: 50% 0%; }
    }

    header, footer {
      width: 100%;
      background: rgba(10, 15, 31, 0.98);
      backdrop-filter: blur(20px);
      text-align: center;
      padding: 18px 0;
      color: #f2f2f2;
      box-shadow: 0 4px 30px rgba(0,0,0,0.7);
      position: relative;
      z-index: 10;
    }

    footer {
      margin-top: auto;
      border-top: 1px solid rgba(245,197,24,0.15);
    }

    main {
      flex: 1;
      padding: 20px 0 60px;
      position: relative;
      z-index: 1;
    }

    /* Titre */
    h1 {
      font-family: 'Cinzel', serif;
      font-size: clamp(2rem, 5vw, 3.2rem);
      font-weight: 700;
      background: linear-gradient(135deg, #f5c518, #ffdd57, #f5c518);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 20px var(--gold-glow));
      text-align: center;
      margin: 50px auto 20px;
      animation: fadeInDown 1.2s ease;
    }

    @keyframes fadeInDown {
      from { opacity: 0; transform: translateY(-30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Bandeau */
    .subhero {
      max-width: 1000px;
      margin: 0 auto 50px;
      padding: 18px 24px;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      border: 2px solid rgba(245,197,24,0.35);
      border-radius: 20px;
      backdrop-filter: blur(15px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.6);
      color: #ffffff;
      text-align: center;
      animation: fadeInUp 1s ease;
      font-size: 1.05rem;
    }

    /* Carte film */
    .cinema-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
      border: 2px solid rgba(245,197,24,0.35);
      border-radius: 20px;
      backdrop-filter: blur(20px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.8);
      transition: 0.4s;
      animation: fadeInUp 0.8s ease forwards;
      opacity: 0;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .cinema-card.visible { opacity: 1; }

    .cinema-card:hover {
      transform: translateY(-12px) scale(1.02);
      box-shadow: 0 20px 60px rgba(245,197,24,0.4);
      border-color: rgba(245,197,24,0.6);
    }

    .cinema-card img {
      height: 320px;
      object-fit: cover;
      border-radius: 18px 18px 0 0;
      transition: 0.4s;
    }

    .cinema-card:hover img { transform: scale(1.05); }

    .card-body {
      padding: 1.5rem;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .card-title {
      color: #f5c518;
      font-size: 1.4rem;
      font-weight: 700;
    }

    .film-age {
      color: #f2f2f2;
      font-size: 0.95rem;
    }

    .film-description {
      color: #ffffff;
      font-size: 0.95rem;
      line-height: 1.6;
      flex: 1;
    }

    .badge-heart {
      background: linear-gradient(135deg, #ff004d, #c7007a);
      color: #ffffff;
      padding: 8px 16px;
      border-radius: 20px;
      display: inline-block;
      font-weight: 600;
      align-self: flex-start;
    }

    .film-note {
      color: #f5c518;
      font-weight: bold;
    }

    /* Bouton */
    .btn-cinema {
      background: linear-gradient(135deg, #ff004d, #a700ff);
      color: #ffffff;
      border-radius: 12px;
      border: none;
      padding: 10px 22px;
      font-weight: bold;
      box-shadow: 0 4px 15px rgba(255,0,77,0.4);
    }

    /* Message vide */
    .empty-message {
      text-align: center;
      padding: 4rem 2rem;
      color: #ffffff;
    }

    .empty-sub {
      color: #f5c518;
      font-weight: 500;
    }

    @media (max-width: 767px) {
      .cinema-card img { height: 250px; }
      h1 { font-size: 2rem; }
    }
  </style>
</head>
<body>

<header>
  <%- include('partials/header') %>
</header>

<main class="container">
  <h1><i class="fas fa-film me-3"></i>Films du mercredi</h1>

  <p class="subhero">
    <i class="fa-regular fa-calendar-check me-2"></i>
    Chaque mercredi, découvrez les nouveautés fraîchement ajoutées à notre catalogue.
  </p>

  <% if (films && films.length > 0) { %>
  <div class="row g-4">
    <% films.forEach(film => { %>
      <div class="col-12 col-sm-6 col-lg-4">
        <article class="card cinema-card">
          <img src="<%= film.affiche_url %>" alt="<%= film.titre %>" loading="lazy">

          <div class="card-body">
            <h2 class="card-title"><%= film.titre %></h2>

            <p class="film-age">Âge minimum : <strong><%= film.age_minimum %>+</strong></p>

            <% if (film.description) { %>
              <p class="film-description"><%= film.description %></p>
            <% } %>

            <% if (film.label_coup_de_coeur) { %>
              <span class="badge-heart">❤️ Coup de cœur</span>
            <% } %>

            <div class="d-flex justify-content-between align-items-center mt-auto">
              <a href="/films/<%= film.id_film || film.id %>" class="btn btn-cinema">Détails</a>

              <% if (typeof film.note_moyenne !== 'undefined') { %>
                <span class="film-note"><i class="fas fa-star"></i> <%= film.note_moyenne %></span>
              <% } %>
            </div>
          </div>
        </article>
      </div>
    <% }) %>
  </div>

  <% } else { %>
  <div class="empty-message">
    <p class="fs-5">Aucun film ajouté ce mercredi.</p>
    <p class="empty-sub">Revenez bientôt pour découvrir nos nouveautés !</p>
  </div>
  <% } %>

</main>

<footer>
  <%- include('partials/footer') %>
</footer>

<script>
  // animation apparition cartes
  document.addEventListener("DOMContentLoaded", () => {
    const cards = document.querySelectorAll(".cinema-card");
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
        }
      });
    });
    cards.forEach(card => observer.observe(card));
  });
</script>


</body>
</html>
